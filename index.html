<!DOCTYPE html>
<html lang="en">
<head>
  <!--
    Apoculus - 3D Autostereogram Generator
    MIT License

    Copyright (c) 2025 NQR

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE.

    This software includes third-party components:
    - Depth Anything V2 (Apache 2.0) - AI depth estimation
    - ONNX Runtime Web (MIT) - WebGPU/WASM inference
    - JSZip (MIT OR GPL-3.0, used under MIT) - ZIP file creation

    See LICENSES-THIRD-PARTY.md and NOTICE for full attribution.
  -->
  <!-- Favicons (browser tabs, bookmarks) -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon-16x16.png">
    
  <!-- iOS & iPadOS (home screen icon when ÔøΩAdd to Home ScreenÔøΩ) -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/images/apple-touch-icon-180x180.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apoculus</title>
  <meta name="description" content="Create 3D autostereograms from text, images, and video with AI-powered depth estimation. Generate magic eye images in your browser.">

  <!-- Open Graph -->
  <meta property="og:title" content="Apoculus | NQR Labs">
  <meta property="og:description" content="Create 3D autostereograms from text, images, and video with AI-powered depth estimation. Generate magic eye images in your browser.">
  <meta property="og:image" content="https://nqrlabs.com/Apoculus/assets/images/logo.png">
  <meta property="og:url" content="https://nqrlabs.com/Apoculus/">
  <meta property="og:type" content="website">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Apoculus | NQR Labs">
  <meta name="twitter:description" content="Create 3D autostereograms from text, images, and video with AI-powered depth estimation. Generate magic eye images in your browser.">
  <meta name="twitter:image" content="https://nqrlabs.com/Apoculus/assets/images/logo.png">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://nqrlabs.com/Apoculus/">

  <!-- ONNX Runtime Web for AI depth prediction -->
  <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.19.2/dist/ort.webgpu.min.js"></script>

  <!-- JSZip for creating ZIP files -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
  <div class="container">
    <!-- Control Panel -->
    <div class="control-panel">
      <header>
        <img src="assets/images/logo.png" alt="Apoculus Logo" onerror="this.style.display='none'" style="display:block; margin-left:auto; margin-right:auto; width:50%;">
        <h1>Apoculus</h1>
        <p class="subtitle">3D Image Generator</p>
        <div style="text-align: center; margin-top: 10px;">
          <span id="generalHelpLink" style="font-size: 0.85rem; color: #5de1ff; cursor: pointer; opacity: 0.9; text-decoration: underline;">üìñ Help & ARG Creator Guide</span>
        </div>
      </header>

      <!-- Add Layer -->
      <div class="section">
        <div class="section-title">
          Add Layer
        </div>
        <div class="button-group">
          <button id="addTextBtn">+Text</button>
          <button id="addImageBtn">+Image</button>
          <button id="addVideoBtn">+Video</button>
        </div>
        <input type="file" id="imageFileInput" accept="image/*">
        <input type="file" id="videoFileInput" accept="video/*">
      </div>

      <!-- Layers -->
      <div class="section">
        <div class="section-title">Layers</div>
        <div class="layer-list" id="layerList">
          <div class="help-text" style="font-size: 0.85rem; padding: 15px;">
            No layers yet. Add text or an image to begin.
          </div>
        </div>
      </div>

      <!-- Layer Settings -->
      <div class="section" id="layerSettings" style="display: none;">
        <div class="section-title">Layer Settings</div>

        <!-- Text Content -->
        <div class="control-group" id="textContentGroup" style="display: none;">
          <label class="control-label">Text</label>
          <textarea id="layerText" placeholder="Enter text..."></textarea>
        </div>

        <!-- Font Selection -->
        <div class="control-group" id="fontGroup" style="display: none;">
          <label class="control-label">Font</label>
          <select id="layerFont">
            <option value="'Arial Black', sans-serif">Arial Black</option>
            <option value="'Impact', sans-serif">Impact</option>
            <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
            <option value="'Verdana', sans-serif">Verdana</option>
            <option value="'Tahoma', sans-serif">Tahoma</option>
            <option value="custom">Upload Custom Font...</option>
          </select>
          <input type="file" id="customFontInput" accept=".ttf,.otf,.woff,.woff2" style="margin-top: 8px;">
        </div>

        <!-- Size -->
        <div class="control-group">
          <label class="control-label">Size</label>
          <div class="range-container">
            <input type="range" id="layerSize" min="20" max="400" value="100">
            <span class="range-value" id="layerSizeValue">100</span>
          </div>
        </div>

        <!-- Depth -->
        <div class="control-group">
          <label class="control-label">Depth Level</label>
          <div class="range-container">
            <input type="range" id="layerDepth" min="0" max="100" value="20">
            <span class="range-value" id="layerDepthValue">20</span>
          </div>
          <div class="info-hint">Higher = closer to you</div>
        </div>

        <!-- Rotation -->
        <div class="control-group">
          <label class="control-label">Rotation</label>
          <div class="range-container">
            <input type="range" id="layerRotation" min="-180" max="180" value="0">
            <span class="range-value" id="layerRotationValue">0¬∞</span>
          </div>
        </div>

        <!-- Video Frame Scrubber (for video layers only) -->
        <div class="control-group" id="videoFrameGroup" style="display: none;">
          <label class="control-label">Video Frame</label>
          <div class="range-container">
            <input type="range" id="videoFrameSlider" min="0" max="100" value="0">
            <input type="number" id="videoFrameInput" min="0" max="100" value="0" style="width: 70px; margin-left: 8px; padding: 4px; background: rgba(93, 225, 255, 0.1); border: 1px solid rgba(93, 225, 255, 0.3); border-radius: 4px; color: #d7e8ff; font-size: 0.9rem;">
          </div>
          <div class="info-hint"><span id="videoFrameInfo">Frame 0 of 0 (0.00s)</span></div>
        </div>

        <!-- Position X -->
        <div class="control-group">
          <label class="control-label">Horizontal Position</label>
          <div class="range-container">
            <input type="range" id="layerX" min="0" max="1000" value="500">
            <span class="range-value" id="layerXValue">500</span>
          </div>
        </div>

        <!-- Position Y -->
        <div class="control-group">
          <label class="control-label">Vertical Position</label>
          <div class="range-container">
            <input type="range" id="layerY" min="0" max="1000" value="500">
            <span class="range-value" id="layerYValue">500</span>
          </div>
        </div>

        <!-- Depth Algorithm (for images) -->
        <div class="control-group" id="depthAlgorithmGroup" style="display: none;">
          <label class="control-label">Depth Algorithm</label>
          <select id="layerDepthAlgorithm">
            <option value="depth-anything-v2">Depth Anything V2 (AI)</option>
            <option value="direct">Direct Grayscale Mapping</option>
            <option value="retinex">Shadow-Aware (Retinex-inspired)</option>
          </select>
          <div class="info-hint">AI depth prediction works best for photos and complex scenes <span id="imageDepthHelpLink" style="margin-left: 4px; color: #5de1ff; cursor: pointer; text-decoration: underline; opacity: 0.9;">Help</span></div>
        </div>

        <!-- Retinex Radius (for shadow-aware algorithm) -->
        <div class="control-group" id="retinexRadiusGroup" style="display: none;">
          <label class="control-label">Shadow Detection Radius</label>
          <div class="range-container">
            <input type="range" id="layerRetinexRadius" min="16" max="64" value="32" step="4">
            <span class="range-value" id="layerRetinexRadiusValue">32px</span>
          </div>
          <div class="info-hint">Larger radius = smoother illumination estimation</div>
        </div>

        <!-- Depth Gamma (for images) -->
        <div class="control-group" id="depthGammaGroup" style="display: none;">
          <label class="control-label">Depth Gamma</label>
          <div class="range-container">
            <input type="range" id="layerDepthGamma" min="0.6" max="1.4" value="1.0" step="0.05">
            <span class="range-value" id="layerDepthGammaValue">1.0</span>
          </div>
          <div class="info-hint">Adjust midtone depth distribution (lower = flatter, higher = steeper)</div>
        </div>

        <!-- Invert Depth (for images) -->
        <div class="control-group" id="invertDepthGroup" style="display: none;">
          <label class="control-label">
            <input type="checkbox" id="invertDepth" style="width: auto; margin-right: 8px;">
            Invert Depth
          </label>
          <div class="info-hint">Checked = black is foreground, white is background</div>
        </div>

        <!-- Download Depthmap -->
        <div class="control-group" id="downloadDepthmapGroup" style="display: none;">
          <button id="downloadDepthmapBtn" class="secondary-btn">üíæ Download Depthmap</button>
          <div class="info-hint">Download the depth map for editing. (Optional)</div>
        </div>
      </div>

      <!-- Global Settings -->
      <div class="section">
        <div class="section-title">Image Settings</div>

        <!-- Pattern Density -->
        <div class="control-group">
          <label class="control-label">Pattern Density</label>
          <div class="range-container">
            <input type="range" id="patternDensity" min="2" max="8" value="4" step="1">
            <span class="range-value" id="patternDensityValue">4</span>
          </div>
          <div class="info-hint">Dots per tile</div>
        </div>

        <!-- Strip Width -->
        <div class="control-group">
          <label class="control-label">Pattern Width</label>
          <div class="range-container">
            <input type="range" id="stripWidth" min="47" max="97" value="73" step="1">
            <span class="range-value" id="stripWidthValue">73px</span>
          </div>
        </div>

        <!-- Depth Scale -->
        <div class="control-group">
          <label class="control-label">3D Effect Strength</label>
          <div class="range-container">
            <input type="range" id="depthScale" min="0.3" max="1.5" value="0.8" step="0.1">
            <span class="range-value" id="depthScaleValue">0.8</span>
          </div>
        </div>

        <!-- Output Size -->
        <div class="control-group">
          <label class="control-label">Output Width</label>
          <div class="range-container">
            <input type="range" id="outputWidth" min="800" max="2000" value="1200" step="100">
            <span class="range-value" id="outputWidthValue">1200px</span>
          </div>
        </div>

        <!-- Color Scheme -->
        <div class="control-group">
          <label class="control-label">Color Scheme</label>
          <select id="colorScheme">
            <option value="grayscale">Grayscale</option>
            <option value="color">Random Colors</option>
            <option value="cyan">Cyan Dots</option>
            <option value="magenta">Magenta Dots</option>
            <option value="green">Green Dots</option>
            <option value="amber">Amber Dots</option>
            <option value="rainbow">Rainbow</option>
            <option value="neon">Neon Mix</option>
            <option value="fire">Fire</option>
            <option value="ice">Ice</option>
            <option value="forest">Forest</option>
            <option value="sunset">Sunset</option>
            <option value="ocean">Ocean</option>
            <option value="matrix">Matrix Green</option>
            <option value="vaporwave">Vaporwave</option>
            <option value="synthwave">Synthwave</option>
          </select>
        </div>
      </div>

      <!-- Export -->
      <div class="section">
        <button id="downloadBtn">‚¨á Download Image</button>
        <button id="downloadVideoBtn" style="margin-top: 10px;">üé¨ Download Video Frames</button>
        <div class="info-hint" style="margin-top: 8px;">Exports PNG frames in a ZIP file. Compile with FFmpeg or your video editor for full control over compression.</div>
        <div id="videoProgress" style="display: none; margin-top: 10px;">
          <div class="control-label" style="text-align: center;">
            <span id="videoProgressText">Rendering video...</span>
          </div>
          <div style="width: 100%; height: 8px; background: rgba(93, 225, 255, 0.2); border-radius: 4px; overflow: hidden;">
            <div id="videoProgressBar" style="width: 0%; height: 100%; background: linear-gradient(90deg, #5de1ff, #00ffaa); transition: width 0.3s;"></div>
          </div>
          <button id="stopRenderingBtn" class="danger-btn" style="margin-top: 10px;">‚èπ Stop Rendering</button>
        </div>
      </div>

      <div class="license-footer">
        <a href="https://youtube.com/@CLU-NQR" target="_blank">YouTube</a> &middot;
        <a href="https://discord.gg/HT9YE8rvuN" target="_blank">Discord</a> &middot;
        <a href="https://nqrlabs.com" target="_blank">NQR Labs</a> &middot;
        <a href="https://github.com/NQRLabs" target="_blank">GitHub</a>
        <br>
        &copy; 2025 NQR &middot; <a id="licenseFooter">License</a>
      </div>
    </div>

    <!-- Preview Panel -->
    <div class="preview-panel">
      <div class="preview-header">
        <div class="preview-title">Preview</div>
        <div class="preview-actions">
          <button id="regenerateBtn">üîÑ Regenerate</button>
        </div>
      </div>
      <div class="preview-container">
        <canvas id="previewCanvas" width="1200" height="800"></canvas>
      </div>
    </div>
  </div>

  <!-- License Modal -->
  <div class="license-overlay" id="licenseOverlay"></div>
  <div class="license-modal" id="licenseModal">
    <div class="license-modal-header">
      <h2 class="license-modal-title">Apoculus License</h2>
      <div class="license-close" id="licenseClose">&times;</div>
    </div>
    <div class="license-modal-text">Apoculus - MIT License

Copyright &copy; 2025 NQR

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

<hr></hr>

THIRD-PARTY COMPONENTS

This software includes third-party libraries:

‚Ä¢ Depth Anything V2 (Apache License 2.0)
  AI depth estimation model
  https://github.com/DepthAnything/Depth-Anything-V2

‚Ä¢ ONNX Runtime Web (MIT License)
  WebGPU/WebAssembly inference engine
  https://github.com/microsoft/onnxruntime

‚Ä¢ JSZip (MIT License, dual-licensed MIT OR GPL-3.0)
  ZIP file creation library
  https://github.com/Stuk/jszip

See <a href="LICENSES-THIRD-PARTY.md" target="_blank">LICENSES-THIRD-PARTY.md</a> and <a href="NOTICE" target="_blank">NOTICE</a> for complete attribution.
    </div>
  </div>

  <!-- Image Depth Help Modal -->
  <div class="license-overlay" id="depthHelpOverlay"></div>
  <div class="license-modal" id="depthHelpModal" style="max-width: 700px; max-height: 85vh;">
    <div class="license-modal-header">
      <h2 class="license-modal-title">Creating Depth Maps for Images</h2>
      <div class="license-close" id="depthHelpClose">√ó</div>
    </div>
    <div class="license-modal-text" style="text-align: left; line-height: 1.6; white-space: normal;">
      <p style="margin: 0 0 10px 0; color: #d7e8ff; font-size: 13px;">There are several ways to prepare images for depth mapping in Apoculus. Choose the method that works best for your workflow:</p>

      <h3 style="margin: 10px 0 5px 0; color: #5de1ff; font-size: 14px; font-weight: bold;">ü§ñ AI-Powered (Easiest)</h3>
      <p style="margin: 0 0 3px 0;"><strong style="color: #00ffaa;">Depth Anything V2 (Built-in)</strong></p>
      <p style="margin: 0 0 5px 0;">Upload any photo and let the AI predict depth automatically. Works great for portraits, landscapes, and complex scenes. Just select "Depth Anything V2 (AI)" from the Depth Algorithm dropdown.</p>
      <p style="margin: 0 0 10px 0; font-size: 12px; opacity: 0.8;">‚úì Best for photos and natural scenes<br>‚úì No preparation needed<br>‚úì Model loads automatically on first use (~97MB)</p>

      <h3 style="margin: 10px 0 5px 0; color: #5de1ff; font-size: 14px; font-weight: bold;">üé® Manual Grayscale Depth Maps</h3>
      <p style="margin: 0 0 3px 0;"><strong style="color: #00ffaa;">Simple Silhouettes</strong></p>
      <p style="margin: 0 0 8px 0;">Create a grayscale image where white = foreground (near) and black = background (far). Works great for logos, icons, and simple graphics.</p>

      <p style="margin: 0 0 3px 0;"><strong style="color: #00ffaa;">Layered Depth with GIMP/Photoshop</strong></p>
      <p style="margin: 0 0 3px 0;">Create complex multi-depth scenes:</p>
      <ol style="margin: 0 0 8px 20px; padding: 0;">
        <li style="margin-bottom: 2px;">Separate your image into layers (foreground, midground, background)</li>
        <li style="margin-bottom: 2px;">Create silhouettes of each layer</li>
        <li style="margin-bottom: 2px;">Assign different grayscale values:
          <ul style="margin: 2px 0 0 15px;">
            <li>Closest objects: White (255)</li>
            <li>Middle distance: Mid-gray (128)</li>
            <li>Far background: Dark gray (64)</li>
            <li>Sky/background: Black (0)</li>
          </ul>
        </li>
        <li style="margin-bottom: 2px;">Flatten to a single grayscale image</li>
        <li>Optional: Use Gaussian blur to smooth transitions between layers</li>
      </ol>

      <p style="margin: 0 0 3px 0;"><strong style="color: #00ffaa;">3D Software Export</strong></p>
      <p style="margin: 0 0 10px 0;">If you're working with 3D models in Blender, Maya, or similar tools, you can render a depth pass (Z-depth) and export it as a grayscale image. This gives you precise control over depth based on actual 3D geometry.</p>

      <h3 style="margin: 10px 0 5px 0; color: #5de1ff; font-size: 14px; font-weight: bold;">üì± Mobile Apps & Web Tools</h3>
      <p style="margin: 0 0 3px 0;"><strong style="color: #00ffaa;">Mobile Apps</strong></p>
      <p style="margin: 0 0 8px 0;"><strong>DepthMaker</strong> - iOS/Android app that generates depth maps from photos using portrait mode or AI</p>

      <p style="margin: 0 0 3px 0;"><strong style="color: #00ffaa;">Web-Based Tools</strong></p>
      <p style="margin: 0 0 2px 0;"><strong>Depth Map Extractor</strong> - Extract depth data from images with depth information</p>
      <p style="margin: 0 0 2px 0;"><strong>Depthy</strong> - Create depth maps from photos with interactive painting tools</p>
      <p style="margin: 0 0 10px 0;"><strong>3D Photo Inpainting</strong> - AI-based depth estimation from single photos</p>

      <h3 style="margin: 10px 0 5px 0; color: #5de1ff; font-size: 14px; font-weight: bold;">üí° Tips for Best Results</h3>
      <ul style="margin: 0 0 10px 20px; padding: 0;">
        <li style="margin-bottom: 2px;"><strong>High Contrast:</strong> Images with clear brightness differences produce better 3D effects</li>
        <li style="margin-bottom: 2px;"><strong>Smooth Gradients:</strong> Use Gaussian blur on depth transitions to avoid "sparkle" artifacts</li>
        <li style="margin-bottom: 2px;"><strong>PNG Transparency:</strong> Transparent backgrounds automatically stay at depth 0 (far)</li>
        <li style="margin-bottom: 2px;"><strong>Depth Gamma:</strong> Adjust 0.6-1.4 to control how midtones map to depth</li>
        <li style="margin-bottom: 2px;"><strong>Invert Depth:</strong> Use for white-on-black images or reversed depth perception</li>
        <li><strong>Shadow-Aware Algorithm:</strong> Use for photos with strong shadows or uneven lighting</li>
      </ul>

      <h3 style="margin: 10px 0 5px 0; color: #5de1ff; font-size: 14px; font-weight: bold;">üéØ Quick Workflow Recommendations</h3>
      <p style="margin: 0 0 2px 0;"><strong>For photos:</strong> Use Depth Anything V2 (AI)</p>
      <p style="margin: 0 0 2px 0;"><strong>For logos/graphics:</strong> Create simple grayscale silhouettes</p>
      <p style="margin: 0 0 2px 0;"><strong>For layered scenes:</strong> Use GIMP/Photoshop with multiple gray levels</p>
      <p style="margin: 0 0 2px 0;"><strong>For 3D projects:</strong> Export Z-depth pass from your 3D software</p>
      <p style="margin: 0 0 10px 0;"><strong>For mobile workflow:</strong> Use DepthMaker app, then upload here</p>

      <p style="margin: 10px 0 0 0; padding: 10px; background: rgba(93, 225, 255, 0.1); border-left: 3px solid #5de1ff; font-size: 12px; color: #d7e8ff;">
        <strong>Remember:</strong> Depth maps are just grayscale images where brightness = distance from viewer. White = close, black = far. Everything else is creative freedom!
      </p>
    </div>
  </div>

  <!-- General Help Modal for ARG Creators -->
  <div class="license-overlay" id="generalHelpOverlay"></div>
  <div class="license-modal" id="generalHelpModal" style="max-width: 800px; max-height: 90vh;">
    <div class="license-modal-header">
      <h2 class="license-modal-title">Apoculus - Help & ARG Creator Guide</h2>
      <div class="license-close" id="generalHelpClose">√ó</div>
    </div>
    <div class="license-modal-text" style="text-align: left; line-height: 1.6; white-space: normal; overflow-y: auto;">

      <h3 style="margin: 0 0 10px 0; color: #5de1ff; font-size: 16px; font-weight: bold;">What is an Autostereogram?</h3>
      <p style="margin: 0 0 10px 0;">An autostereogram (also called a "Magic Eye" image) is a 2D pattern that reveals a hidden 3D scene when viewed with the right technique. By crossing or diverging your eyes, you can see text, images, and shapes floating at different depths. Perfect for hiding clues in ARGs!</p>

      <h3 style="margin: 15px 0 5px 0; color: #5de1ff; font-size: 16px; font-weight: bold;">üëÄ How to View Stereograms</h3>
      <p style="margin: 0 0 5px 0;"><strong style="color: #00ffaa;">Cross-Eye Method (Easier):</strong></p>
      <ol style="margin: 0 0 8px 20px; padding: 0;">
        <li>Hold image at arm's length</li>
        <li>Cross your eyes slightly until you see three overlapping images</li>
        <li>Focus on the middle image - the 3D will appear with depth inverted</li>
      </ol>

      <p style="margin: 0 0 5px 0;"><strong style="color: #00ffaa;">Parallel Method (Wall-Eye):</strong></p>
      <ol style="margin: 0 0 10px 20px; padding: 0;">
        <li>Hold image close, then slowly move it away</li>
        <li>Look "through" the image as if staring at something far behind it</li>
        <li>The 3D scene will snap into focus</li>
      </ol>

      <p style="margin: 0 0 10px 0; padding: 8px; background: rgba(255, 200, 0, 0.15); border-left: 3px solid #ffaa00; font-size: 12px;">
        <strong>‚ö†Ô∏è For ARG Creators:</strong> About 5-10% of people cannot see stereograms due to vision conditions. Always provide an alternative way to access hidden content! Consider linking to <a href="../Apochron/" style="color: #5de1ff;">Apochron</a> (digital autostereogram viewer) as a backup, or include hints that the content is 3D.
      </p>

      <h3 style="margin: 15px 0 5px 0; color: #5de1ff; font-size: 16px; font-weight: bold;">üéØ Creating Better Still Image Stereograms</h3>

      <p style="margin: 0 0 5px 0;"><strong style="color: #00ffaa;">Avoid Horizontal Stratification (Critical!):</strong></p>
      <ul style="margin: 0 0 10px 20px; padding: 0;">
        <li style="margin-bottom: 2px;"><strong>Problem:</strong> Long horizontal strings can create visible horizontal bands that break the illusion</li>
        <li style="margin-bottom: 2px;"><strong>Solution:</strong> Rotate text, mix upper and lowercase letters, break long words across multiple lines, or use shorter phrases</li>
        <li style="margin-bottom: 2px;"><strong>Example:</strong> Instead of "PASSWORD IS HIDDEN", use "Password\nIs\nHidden" rotated 45 degrees</li>
      </ul>

      <p style="margin: 0 0 5px 0;"><strong style="color: #00ffaa;">Pattern Settings for Quality:</strong></p>
      <ul style="margin: 0 0 10px 20px; padding: 0;">
        <li style="margin-bottom: 2px;"><strong>Pattern Width:</strong> Use prime numbers (53, 59, 61, 67, 71, <strong>73</strong>, 79, 83, 89, 97) to minimize tiling artifacts. Default 73px is optimal.</li>
        <li style="margin-bottom: 2px;"><strong>Pattern Density:</strong> 4-5 dots per strip balances detail vs. viewability. Higher = more detail but harder to see.</li>
        <li style="margin-bottom: 2px;"><strong>3D Effect Strength:</strong> 0.6-0.8 is easiest to view. Higher values create dramatic depth but may cause eye strain.</li>
      </ul>

      <p style="margin: 0 0 5px 0;"><strong style="color: #00ffaa;">Text Depth Tips:</strong></p>
      <ul style="margin: 0 0 10px 20px; padding: 0;">
        <li style="margin-bottom: 2px;">Keep text depth between 10-30 for comfortable viewing</li>
        <li style="margin-bottom: 2px;">Space multiple text layers 10-15 depth units apart for clear separation</li>
        <li style="margin-bottom: 2px;">Use bold, thick fonts (Arial Black, Impact) for better visibility</li>
        <li style="margin-bottom: 2px;">Larger font sizes (100-200px) work best for 3D pop-out</li>
      </ul>

      <h3 style="margin: 15px 0 5px 0; color: #5de1ff; font-size: 16px; font-weight: bold;">ü§ñ Using Depth Anything V2 (AI) for Photos</h3>

      <p style="margin: 0 0 5px 0;"><strong style="color: #00ffaa;">Smoother Depth (Avoid "Sliced Layers"):</strong></p>
      <p style="margin: 0 0 5px 0;">By default, AI-generated depth maps can look "sliced" into distinct layers. To create smoother, more natural depth:</p>
      <ul style="margin: 0 0 10px 20px; padding: 0;">
        <li style="margin-bottom: 2px;"><strong>Lower the Depth Gamma:</strong> Set to 0.7-0.8 to compress depth differences</li>
        <li style="margin-bottom: 2px;"><strong>Reduce 3D Effect Strength:</strong> Set to 0.5-0.6 for subtler, smoother transitions</li>
        <li style="margin-bottom: 2px;"><strong>Increase Depth Level:</strong> Set to 60 for more depth resolution</li>
        <li style="margin-bottom: 2px;"><strong>Pre-process the depth map:</strong> Open the exported depth map in an image editor and manually fix layers or trasparent objects like glasses, then upload as a manual depth map</li>
        <li style="margin-bottom: 2px;"><strong>Use Shadow-Aware algorithm:</strong> For photos with dramatic lighting, this can produce smoother results than AI</li>
      </ul>

      <p style="margin: 0 0 5px 0;"><strong style="color: #00ffaa;">What to Avoid:</strong></p>
      <ul style="margin: 0 0 10px 20px; padding: 0;">
        <li style="margin-bottom: 2px;">Very high depth values (>40) with complex images - creates extreme pop-out that's hard to focus on</li>
        <li style="margin-bottom: 2px;">Low-contrast images - auto-level helps, but starting with good contrast is better</li>
        <li style="margin-bottom: 2px;">Images with very fine details - they may create "sparkle" noise in the pattern</li>
      </ul>

      <h3 style="margin: 15px 0 5px 0; color: #5de1ff; font-size: 16px; font-weight: bold;">üé¨ Creating Video Stereograms (Animated)</h3>

      <p style="margin: 0 0 5px 0;"><strong style="color: #00ffaa;">Workflow:</strong></p>
      <ol style="margin: 0 0 10px 20px; padding: 0;">
        <li style="margin-bottom: 3px;">Add a <strong>+ Video</strong> layer in Apoculus</li>
        <li style="margin-bottom: 3px;">Use the frame controls to scrub through your video</li>
        <li style="margin-bottom: 3px;">Click <strong>‚¨á Export Video Frames</strong> to download all frames as PNGs in a ZIP file</li>
        <li style="margin-bottom: 3px;">Extract the ZIP and use ffmpeg to compile frames into a video</li>
      </ol>

      <p style="margin: 0 0 5px 0;"><strong style="color: #00ffaa;">FFmpeg Commands:</strong></p>
      <div style="background: #0a0f14; padding: 10px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 11px; margin: 0 0 10px 0; overflow-x: auto;">
        <p style="margin: 0 0 5px 0; color: #00ffaa;"># Basic conversion (30 fps, high quality)</p>
        <p style="margin: 0 0 10px 0; color: #d7e8ff;">ffmpeg -framerate 30 -i frame_%04d.png -c:v libx264 -pix_fmt yuv420p -crf 18 output.mp4</p>

        <p style="margin: 0 0 5px 0; color: #00ffaa;"># With audio from original video</p>
        <p style="margin: 0 0 10px 0; color: #d7e8ff;">ffmpeg -framerate 30 -i frame_%04d.png -i original_audio.mp3 -c:v libx264 -c:a aac -pix_fmt yuv420p -crf 18 -shortest output.mp4</p>

        <p style="margin: 0 0 5px 0; color: #00ffaa;"># Lossless quality (large file size)</p>
        <p style="margin: 0 0 10px 0; color: #d7e8ff;">ffmpeg -framerate 30 -i frame_%04d.png -c:v libx264 -preset veryslow -qp 0 output.mp4</p>

        <p style="margin: 0 0 5px 0; color: #00ffaa;"># Web-optimized (smaller file, 60fps)</p>
        <p style="margin: 0; color: #d7e8ff;">ffmpeg -framerate 60 -i frame_%04d.png -c:v libx264 -pix_fmt yuv420p -crf 23 -preset slow output.mp4</p>
      </div>

      <p style="margin: 0 0 5px 0;"><strong style="color: #00ffaa;">Recommended Software:</strong></p>
      <ul style="margin: 0 0 10px 20px; padding: 0;">
        <li style="margin-bottom: 2px;"><strong>FFmpeg:</strong> <a href="https://ffmpeg.org/download.html" style="color: #5de1ff;">ffmpeg.org/download.html</a> - Command-line video processing</li>
        <li style="margin-bottom: 2px;"><strong>HandBrake:</strong> <a href="https://handbrake.fr/" style="color: #5de1ff;">handbrake.fr</a> - GUI video encoder (can import image sequences)</li>
        <li style="margin-bottom: 2px;"><strong>DaVinci Resolve:</strong> <a href="https://www.blackmagicdesign.com/products/davinciresolve" style="color: #5de1ff;">Free video editor</a> - Import PNGs as image sequence</li>
      </ul>

      <h3 style="margin: 15px 0 5px 0; color: #5de1ff; font-size: 16px; font-weight: bold;">üé≠ ARG Use Cases & Ideas</h3>
      <ul style="margin: 0 0 10px 20px; padding: 0;">
        <li style="margin-bottom: 3px;"><strong>Hidden Passwords/Codes:</strong> Embed text at depth 20-30, surround with noise patterns at depth 0</li>
        <li style="margin-bottom: 3px;"><strong>Layered Clues:</strong> Multiple text strings at different depths reveal a sequence or cipher key</li>
        <li style="margin-bottom: 3px;"><strong>Photo Puzzles:</strong> Use AI depth on a significant photo - players must view it stereoscopically to see hidden elements</li>
        <li style="margin-bottom: 3px;"><strong>Video Messages:</strong> Animated stereogram reveals a message only when viewed correctly while playing</li>
        <li style="margin-bottom: 3px;"><strong>Gatekeeper Puzzle:</strong> "Can you see in 3D?" as skill check - code visible only to those who can view stereograms</li>
        <li style="margin-bottom: 3px;"><strong>Red Herring Misdirection:</strong> Surface pattern looks meaningful but real clue is in the 3D depth</li>
      </ul>

      <p style="margin: 10px 0 0 0; padding: 10px; background: rgba(93, 225, 255, 0.1); border-left: 3px solid #5de1ff; font-size: 12px; color: #d7e8ff;">
        <strong>üí° Pro Tip:</strong> Always test your stereograms with multiple people before deploying in an ARG. What's easy for you to see might be impossible for others. Provide hints like "cross your eyes" or "look for the 3D message" to guide players.
      </p>

      <h3 style="margin: 15px 0 5px 0; color: #5de1ff; font-size: 16px; font-weight: bold;">üîó Related NQR Tools</h3>
      <ul style="margin: 0 0 10px 20px; padding: 0;">
        <li style="margin-bottom: 2px;"><strong><a href="../Apochron/" style="color: #5de1ff;">Apochron</a></strong> - Animated autostereogram viewer for players who struggle with static images</li>
        <li style="margin-bottom: 2px;"><strong><a href="../SpectroGhost/" style="color: #5de1ff;">SpectroGhost</a></strong> - Hide messages in audio spectrograms</li>
        <li style="margin-bottom: 2px;"><strong><a href="../Ghostmark/" style="color: #5de1ff;">Ghostmark</a></strong> - Hide images inside other images (steganography)</li>
        <li style="margin-bottom: 2px;"><strong><a href="../Inknigma/" style="color: #5de1ff;">Inknigma</a></strong> - Multi-layer invisible ink and steganography</li>
      </ul>

      <p style="margin: 15px 0 0 0; text-align: center; font-size: 12px; opacity: 0.7;">
        Made with üíô by <a href="https://nqrlabs.com" style="color: #5de1ff;">NQR Labs</a> | <a href="https://discord.gg/HT9YE8rvuN" style="color: #5de1ff;">Join Discord</a>
      </p>
    </div>
  </div>

  <script src="assets/js/app.js"></script>
</body>
</html>
